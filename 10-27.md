#### [301. 删除无效的括号](https://leetcode-cn.com/problems/remove-invalid-parentheses/)

难度困难

给你一个由若干括号和字母组成的字符串 `s` ，删除最小数量的无效括号，使得输入的字符串有效。

返回所有可能的结果。答案可以按 **任意顺序** 返回。

 

**示例 1：**

```
输入：s = "()())()"
输出：["(())()","()()()"]
```

**示例 2：**

```
输入：s = "(a)())()"
输出：["(a())()","(a)()()"]
```

**示例 3：**

```
输入：s = ")("
输出：[""]
```

 

**提示：**

- `1 <= s.length <= 25`
- `s` 由小写英文字母以及括号 `'('` 和 `')'` 组成
- `s` 中至多含 `20` 个括号



今天的题目，难度`hard`，看到之后就被吓到了

![image-20211027184453357](https://typra-pictures.oss-cn-beijing.aliyuncs.com/imgs/image-20211027184453357.png)

然后想了好久，我特么的好像真做不出来，那咋办呢？只能看答案了？

然后我特么惊呆了

![image-20211027184737076](https://typra-pictures.oss-cn-beijing.aliyuncs.com/imgs/image-20211027184737076.png)

答案大多数都是深度优先搜索做的，因为这种方法，相当于将所有情况遍历了一遍，所以一般来说，速度是很慢的，所以一般伴随着剪枝法，一起使用的，前面提到过剪枝法，就是一些一定不可能存在的情况删除掉，这样就从某种程度来将优化了算法。

我是万万没想到，这个题目会用这种方式进行解答。

```go
//  判断字符是否合法，这个代码没啥好说的
func isValid(str string) bool{
	cnt := 0
	for _, ch := range str {
		if ch == '(' {
			cnt++
		}else if ch == ')' {
			cnt--
			if cnt < 0 {
				return false
			}
		}
	}
	return cnt == 0
}

func removeInvalidParentheses(s string) (ans []string) {
    // 采用map 实现set的功能
    // 初始字符串放到set 中 
	curSet := map[string]struct{}{s:{}}
	for {
        // 如果字符集中有一个合法的，将合法符添加到返回字符串中
		for str := range curSet {
			if isValid(str) {
				ans = append(ans,str)
			}
		}
        // 如果此长度的字符串有一个合法的，就不需要继续删减了，直接返回
        // 因为题目中提到删除最小数量的无效括号
		if len(ans) > 0 {
			return
		}
        // 如果当前没有有效字符串，那么就将每个字符串，每位字符都删除一下，并且继续判断
        //  也就是这样一直循环下去
		nextSet:=map[string]struct{}{}
		for str := range curSet {
			for i, ch := range str {
                // 如果出现重复的，直接跳过
				if i > 0 && byte(ch) == str[i-1] {
					continue
				}
				if ch == '(' || ch == ')' {
					nextSet[str[:i]+str[i+1:]] = struct{}{}
				}
			}
		}
		curSet = nextSet
	}
}
```

提交代码

![image-20211027223752740](https://typra-pictures.oss-cn-beijing.aliyuncs.com/imgs/image-20211027223752740.png)

我们发现还可以啊！

当然这个题还要其他的解法，不过看这个办法其实运行速度算中上了，但是其实时间复杂度很大，所以可以看出其实困难题对运行时间的限制放的很宽，从这个角度来看，其实困难题也并不是那么困难，只要能得到结果就好了
